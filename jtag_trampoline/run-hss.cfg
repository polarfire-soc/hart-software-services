if {![exists HSS_DIR]} {
    error "HSS_DIR variable not set. Use set HSS_DIR <path to directory with hss-*.elf"
}

reset init

puts "Running JTAG trampoline"
load_image "$HSS_DIR/hss-jtag_trampoline.hex" 0x0 ihex
resume 0x01800000
wait_halt

puts "L2 configured for HSS"

set SCRATCHPAD_ADDR 0x0A000000

puts "Loading HSS"
load_image "$HSS_DIR/hss-l2scratch.bin" $SCRATCHPAD_ADDR bin

puts "Starting HSS"
resume $SCRATCHPAD_ADDR
